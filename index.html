<!DOCTYPE html>
<html>
<head>
  <title>Phone OTP Login</title>
  <!-- Firebase v8 SDKs (non-modular) -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="container">
    <h2>Phone OTP Login</h2>
    <input type="text" id="phone" placeholder="+91xxxxxxxxxx">
    <div id="recaptcha-container"></div>
    <button onclick="sendOTP()">Send OTP</button>
    <input type="text" id="otp" placeholder="Enter OTP">
    <button onclick="verifyOTP()">Verify OTP</button>
  </div>

  <script>
    // Firebase config
    var firebaseConfig = {
      apiKey: "AIzaSyBBtls8iDd6n2sAtFqL0JRv84r7Af7CmKw",
      authDomain: "turf-booking-55873.firebaseapp.com",
      projectId: "turf-booking-55873",
      storageBucket: "turf-booking-55873.appspot.com",
      messagingSenderId: "931411332125",
      appId: "1:931411332125:web:efa27caeb5b5b50de28af4"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Setup reCAPTCHA
    window.onload = function () {
      window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container', {
        size: 'normal',
        callback: function(response) {
          console.log("reCAPTCHA verified");
        }
      });
      recaptchaVerifier.render();
    };

    // Send OTP
    function sendOTP() {
      const phoneNumber = document.getElementById("phone").value;
      const appVerifier = window.recaptchaVerifier;

      firebase.auth().signInWithPhoneNumber(phoneNumber, appVerifier)
        .then(function(confirmationResult) {
          window.confirmationResult = confirmationResult;
          alert("OTP sent!");
        }).catch(function(error) {
          console.error(error);
          alert(error.message);
        });
    }

    // Verify OTP
    function verifyOTP() {
      const otp = document.getElementById("otp").value;
      window.confirmationResult.confirm(otp)
        .then(function(result) {
          const user = result.user;
          alert("Phone Verified: " + user.phoneNumber);
        }).catch(function(error) {
          alert("Invalid OTP");
        });
    }
  </script>

</body>
</html>
